# 전수 수강대상 검증 전략 보고서 (2026-02-13)

## 1) 목적
DB에 저장된 **모든 과목의 수강대상(target 정책)** 이 원문 수강대상 텍스트/운영 의도와 일치하는지 전수 검증한다.

- 범위 포함:
  - 주전공(전필/전기/전선)
  - 교양(교필/교선), 채플, 교직, 기타
  - 복수전공/부전공/타전공인정(secondary major classification)
- 핵심 원칙:
  - **일치/불일치 판정은 스크립트가 아니라 현재 AI 세션에서 수행**
  - 스크립트/SQL은 **증거 수집/정렬/집계 용도**로만 사용

---

## 2) 현재 모집단 현황 (DB 스냅샷)

- 전체 과목 수: **3,046**
- course.category 분포
  - MAJOR_ELECTIVE 1,564
  - GENERAL_REQUIRED 408
  - GENERAL_ELECTIVE 372
  - MAJOR_BASIC 279
  - MAJOR_REQUIRED 274
  - OTHER 97
  - TEACHING 30
  - CHAPEL 22
- target.student_type 분포
  - GENERAL 4,504
  - FOREIGNER 194
  - MILITARY 9
  - TEACHING_CERT 89
- target.scope_type 분포
  - UNIVERSITY 540
  - COLLEGE 97
  - DEPARTMENT 4,159
- course_secondary_major_classification 분포
  - CROSS_MAJOR / RECOGNIZED 3,647
  - DOUBLE_MAJOR / ELECTIVE 1,465
  - DOUBLE_MAJOR / REQUIRED 298
  - MINOR / ELECTIVE 1,581
  - MINOR / REQUIRED 10
- 과목 원문 수강대상(unique text): **629개 패턴**

---

## 3) 검증 단위 정의

전수검증의 최소 단위를 아래처럼 고정한다.

1. **기본 과목 단위**: `course.code` (분반 포함 실코드)
2. **정책 단위**: `target` 행(allow/deny, scope, student_type, grade, strict)
3. **다전공 단위**: `course_secondary_major_classification` 행(track/completion/department)

즉, 과목 1개당
- 원문 수강대상 텍스트
- 타겟 정책 행들
- (있으면) 복수/부전공 분류 행들
을 합쳐 AI가 판정한다.

---

## 4) AI 판정 프레임워크 (핵심)

### 4-1. 입력 증거
각 과목마다 다음을 함께 본다.
- `course.target` (원문)
- `course.category / sub_category / field / department`
- `target` rows (scope, student_type, grade1~5, is_denied, is_strict)
- `course_secondary_major_classification` rows

### 4-2. 판정 라벨
- **일치**: 원문 의도와 target 정책이 구조적으로 동일
- **부분일치**: 핵심은 맞지만 특정 학년/학생유형/scope 일부 오차
- **불일치**: 정책 방향이 다름(예: University 과다허용, deny 누락 등)
- **판정유보**: 원문 자체가 모호하거나 추가 맥락 필요

### 4-3. 불일치 유형 코드
- T1: Scope 오류 (UNIVERSITY/COLLEGE/DEPARTMENT)
- T2: StudentType 오류 (GENERAL/FOREIGNER/MILITARY/TEACHING_CERT)
- T3: 학년 범위 오류
- T4: Allow/Deny 반전 또는 누락
- T5: Strict 플래그 오류
- T6: 복수/부전공 분류 오류(track/completion/department)
- T7: 학과명/별칭 정규화 누락

---

## 5) 전수검증 절차

### Phase 0. 기준 고정
- 현재 브랜치/DB 스냅샷 시점 기록
- 검증 중 데이터 변동 금지(또는 변경로그 별도 기록)

### Phase 1. 패턴 기반 1차 판정 (629 패턴)
- 동일 원문 수강대상 패턴을 묶어서 먼저 판정
- 패턴 판정 결과를 해당 과목군에 적용
- 단, 카테고리/다전공 맥락이 다른 경우 재판정

### Phase 2. 고위험 우선 검증
고위험 조건 우선 확인:
- `scope_type=UNIVERSITY` 이면서 전공과목
- `student_type=TEACHING_CERT` 과목
- deny row 존재 과목
- category=GENERAL_ELECTIVE (교선)
- secondary major 연결 과목

### Phase 3. 카테고리별 전수 마감
- 전필/전기/전선 → 교필/교선/채플/교직/기타 순으로 전수 마감

### Phase 4. 다전공 전수 마감
- DOUBLE_MAJOR / MINOR / CROSS_MAJOR 각각 전수 판정

### Phase 5. 재검토
- 불일치/유보 건 재판정
- 유형별 수정 우선순위 확정

---

## 6) 세션 운영 방식 (컨텍스트 한계 대응)

AI가 현재 세션에서 판정하므로 배치 단위로 운영한다.

- 권장 배치: **과목 80~150개/턴**
- 매 턴 산출:
  - 판정 완료 목록
  - 불일치 코드(T1~T7)
  - 근거 요약(원문 vs 정책)
- 누적 관리 파일:
  - `script/26-1/reviews/checklists/...` 또는 별도 CSV/MD ledger

---

## 7) 산출물

1. **판정 대장(필수)**
   - columns 예시:
   - `course_code, category, target_text, ai_judgement, mismatch_type, evidence_summary, action`
2. **유형별 요약 리포트**
   - T1~T7 건수, 대표 사례, 수정 가이드
3. **수정안(별도)**
   - SQL/코드/매핑 수정안 분리

---

## 8) 완료 기준 (Definition of Done)

- 전체 과목 3,046개에 대해 판정 라벨 부여 완료
- 복수/부전공/교선 포함 범위 100% 커버
- 불일치 건은 유형(T1~T7) 분류 및 후속 액션 지정
- 재검토 후 판정유보 0건(또는 유보 사유 명문화)

---

## 9) 즉시 실행 체크리스트

- [ ] 전수검증 ledger 파일 생성
- [ ] 패턴 629개 기준 1차 판정 시작
- [ ] 고위험군(UNIVERSITY 전공, TEACHING_CERT, deny 포함) 우선 완료
- [ ] 카테고리별/다전공별 전수 마감
- [ ] 최종 불일치 요약 + 수정 우선순위 보고
