# 교직 3대분류(전공/교직/특성화) — 학과+학년 입력 조회 구현 계획 (2026-02-10)

## 목표
사용자가 **학과(department) + 학년(grade)** 를 입력하면, 해당 학과 학생(입학년도/학번 구간 포함)이 교직과정 관점에서 수강/이수해야 하는 과목을 다음 **3대분류**로 묶어 조회할 수 있도록 한다.

- **전공영역**: 교과내용영역(학과별 기본이수과목) + 기타 전공과목(전공기초 제외)
- **교직영역**: 교직이론 + 교직소양 + 교직실습
- **특성화영역**: 교과교육영역(교과교육론/교과교재연구및지도법/논리및논술 등) + 교직과정 특성화 과목(교원양성특강 등)

> 출처 문서: 「2026학년도 교직과정 이수안내」 PDF 및 이를 기반으로 정리된 텍스트 요약(첨부 txt).

## 현황/제약
- `ssu26-1.csv`에는 **교과내용영역(학과별 기본이수과목)** 을 직접 표시하는 컬럼/값이 없다.
- `course_secondary_major_classification`은 복수/부전공 분류용 테이블로, **교직 기본이수과목** 데이터와 개념이 달라 혼재 저장 시 유지보수/오류 위험이 큼.
- PDF는 이미지 기반(텍스트 레이어 없음)으로 확인되어, 표 데이터 추출을 위해 OCR/외부 추출본 필요.

## 최소 설계(권장)
`course_secondary_major_classification` 컬럼 변경 없이, 다음 **2개**만 추가한다.

### 1) 새 테이블 1개: `teaching_track_course` (가칭)
교직과정 관점의 3대분류를 만들기 위한 **룰/매핑 테이블**.

#### 목적
- 교과내용영역(학과별 기본이수과목) 및 교직/특성화에 해당하는 ‘명시적 과목코드’ 목록을 안정적으로 저장
- 입학년도 구간(예: 2009~2012, 2013~2023, 2024~) 별 기준을 반영

#### 최소 컬럼(안)
- `school_id_from` INT
- `school_id_to` INT
- `department` VARCHAR
- `track_group` ENUM('MAJOR_AREA','TEACHING_AREA','SPECIALIZED_AREA')
- `course_code` BIGINT
- `note` TEXT NULL

#### 인덱스(안)
- `(department, school_id_from, school_id_to, track_group)`
- `(course_code)`

#### 데이터 적재 범위
- **MAJOR_AREA**: PDF 표에 있는 학과별 **기본이수과목** 과목코드 목록
- **TEACHING_AREA**: 교직이론/소양/실습 과목코드(필요 시 명시적으로 저장)
- **SPECIALIZED_AREA**: 교과교육영역(교과교육론/교과교재연구및지도법/논리및논술/교과교재연구… 등) + 특성화 과목(교원양성특강 등) 과목코드

> 비고: “기타전공(전공영역)”은 전공과목 전체를 리스트업하면 규모가 커지므로 **조회 시 규칙으로 계산**(아래 API 로직)하고, 기본이수과목만 테이블로 고정한다.

### 2) API 1개 추가(또는 teaching endpoint 확장)
예: `GET /api/courses/teaching-track?schoolId=25&department=컴퓨터학부&grade=3`

#### 응답 형태(안)
```json
{
  "majorArea": [ ... ],
  "teachingArea": [ ... ],
  "specializedArea": [ ... ]
}
```

#### 분류/조회 로직(최소)
입력: `schoolId`, `department`, `grade`

1) **교직영역**
- DB에서 `Category=TEACHING` 과목을 가져온 뒤,
- 기존 구현인 `TeachingArea`(THEORY/LITERACY/PRACTICE/SUBJECT_EDUCATION)로 분류
- 그 중 **THEORY/LITERACY/PRACTICE** 를 교직영역으로 반환
- 학년 필터링은 기존 `target` 규칙(수강대상/대상외수강제한 등)으로 적용

2) **특성화영역**
- `Category=TEACHING` 중
  - `TeachingArea=SUBJECT_EDUCATION` 또는 `field=교과교육영역`
  - + 특성화 과목(교원양성특강 등) 추가 매핑
- 학년 필터링은 `target` 규칙으로 적용

3) **전공영역**
- (a) **기본이수과목**: `teaching_track_course`에서 `track_group=MAJOR_AREA` + `department` + `schoolId in [from,to]` 로 과목코드 목록을 가져와 과목 조회
- (b) **기타전공과목**: 해당 학과의 전공 과목(`Category in MAJOR_*`)을 조회 후 포함
  - 단, 문서 기준에 따라 **전공기초 제외** 룰 적용 필요
  - `Category=TEACHING` 과목과 중복 제거
- 학년 필터링은 `target` 규칙으로 적용

> 전공기초 제외 정책(가설): `MAJOR_BASIC`을 전공기초로 간주하고 제외. (확정 필요)

## PDF 기반 데이터 추출(기본이수과목)
### 필요한 데이터
- 학과(부)
- 표시과목
- 분야(분야별 1과목 이상 요구)
- 과목코드
- 교과목명
- 입학년도 구간별 적용 여부
- (선택) 1-1/1-2 등 ‘동일 분야 다과목 모두 이수’ 그룹 정보

### 추출 방식
- PDF는 이미지 기반으로 확인되어 서버에서 `pdftotext`가 비어 있음.
- 선택지:
  1) 로컬에서 OCR → 구조화된 CSV 제공 후 적재
  2) 서버에 OCR 도구(tesseract 등) 설치 후 자동 추출(권한 필요)

## 단계별 실행 계획
1) **정책 확정**
- 입학년도 구간을 `schoolId`로 확정(2009~2012, 2013~2023, 2024~)
- 전공기초 제외 규칙 확정(`MAJOR_BASIC` 제외 여부)

2) **DDL/적재 파이프라인**
- `teaching_track_course` DDL 작성 및 마이그레이션 적용
- PDF에서 기본이수과목 코드를 추출해 insert 생성(학교Id 구간 포함)

3) **API 구현**
- `teaching-track` endpoint 구현
- department+grade 입력 시 3대분류로 리스트 반환

4) **검증/리포트**
- 샘플 학과(예: 컴퓨터학부)로 API 결과가 문서/CSV 개설 과목과 일치하는지 확인
- 누락/추가 과목에 대한 리포트 생성

## 리스크/주의사항
- 기본이수과목 판정은 ‘과목코드’ 기준(문서 명시). 코드 매칭 실패 시 전공영역 분류 정확도 저하.
- `target`(수강대상) 규칙이 학년 필터링의 핵심이므로, 교직과목/전공과목 모두에 대해 일관되게 적용해야 함.
- `course_secondary_major_classification`에 교직 데이터를 섞지 않음(개념 혼선 방지).
