# PT-207 채플 수강대상 정책 수정 보고서 (2026학년도 기준)

## 1) 이슈 요약
- 채플 페이지(수강 가능한 채플 추천/조회)에서 **4학년 + 특정 학과(예: 국제법무/국법)** 학생 중 **채플 미이수(satisfied=false)** 인 케이스에서
  - 실제로 수강 가능한 비전채플이 있어야 하는데,
  - 추천/조회 결과가 `재수강반 채플(…09)`만 뜨거나(혹은 비어있어)
  - **수강 가능한 비전채플이 누락**되는 문제가 발생.

## 2) 기존 동작(문제 재현 관찰)
- 1학년: (예외학과 제외) 소그룹채플 또는 비전채플을 듣는 케이스가 존재하며, 기존 로직은 target allow/deny 및 학년별 분배에 의존.
- 2~3학년: allow/deny 정책에 따라 `재수강반 채플(…09)` + 학년에 맞는 비전채플이 추천되는 형태.
- 4학년: `재수강반 채플(…09)`만 노출되는 케이스 발생.

## 3) 2026학년도 기준 정책 근거(인터넷 조사)
### (A) 교목실 채플 일정(학년별 비전채플 운영)
- 2025년 2학기 기준(교목실 공지) 비전채플이 **1학년/2학년/3학년으로 운영**됨을 확인.
  - 월요일: 2학년 비전채플
  - 화요일: 3학년 비전채플
  - 수요일: 1학년 비전채플
  - 목요일: 소그룹채플
- 링크: https://chaplain.ssu.ac.kr/%EC%B1%84%ED%94%8C%EC%95%88%EB%82%B4/%EC%B1%84%ED%94%8C%EC%9D%BC%EC%A0%95/

### (B) SSU:catch 공지(미이수 시 4학년에 직접 신청)
- 소그룹채플 미이수 시 다른 채플로 변경 불가, 이수하지 못한 채플은 **4학년 시기에 스스로 수강신청하여 이수**해야 함을 명시.
- 링크: https://scatch.ssu.ac.kr/%EA%B3%B5%EC%A7%80%EC%82%AC%ED%95%AD/?slug=2025-2%ED%95%99%EA%B8%B0-%EC%86%8C%EA%B7%B8%EB%A3%B9%EC%B1%84%ED%94%8C-%EC%9A%B4%EC%98%81-%EB%B0%8F-%EC%88%98%EA%B0%95-%EC%95%88%EB%82%B4-1%ED%95%99%EB%85%84-%EB%82%B4%EA%B5%AD%EC%9D%B8-%ED%95%99&category=%ED%95%99%EC%82%AC

## 4) 정책 결정(서비스 반영 기준)
- **2~4학년**: 재수강반(…09)을 제외하고, **수강 불가로 분류되는 10채플(…10)** 을 제외한 나머지 **비전채플 전체를 수강 가능 후보로 간주**.
  - 즉, 추천/조회 시 학년/학과 allow/deny의 과도한 제한으로 인해 비전채플이 누락되지 않도록 함.
- **1학년**: 소그룹/비전 분배 및 예외학과 등 기존 정책이 복잡하므로 **기존 target 기반 로직 유지**.

## 5) 구현 변경사항
- 변경 위치: `UntakenCourseCodeService.getUntakenCourseCodes(Category.CHAPEL)`
- 변경 내용(핵심):
  - `grade >= 2`인 경우, target allow/deny 기반 조회 대신
  - `CourseRepository.findAllByCategory(CHAPEL)`로 채플 전체를 가져온 뒤
  - `division == "비전채플"`만 필터
  - `2150101510(10채플)`은 제외
  - 이미 이수한(baseCode 기준) 채플은 제외

## 6) 기대 효과
- 4학년(특히 예외학과/채플 미이수) 케이스에서 **수강 가능한 비전채플이 누락되지 않고 노출**.
- 10채플(수강 제한 특이 케이스)은 계속 제외되어 잘못 추천되는 문제를 방지.
