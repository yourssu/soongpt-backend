# 교양필수 기능 요구사항 반영 체크리스트

`교양필수.md` 기준으로 현재 구현과 대조한 결과입니다.

---

## 1. 공통 (22/23 모두)

| 요구사항 | 반영 여부 | 비고 |
|----------|-----------|------|
| Input: 토큰(학번, 학과, 학년, 수강과목, 졸업사정표 교양필수 충족 여부) | ✅ | `RecommendContext`: department, userGrade, takenSubjectCodes, graduationSummary |
| Output: 현재 교양필수 학점 이수 현황 | ✅ | `progress` (required/completed/satisfied) |
| Edge: 졸업사정표 교양필수 충족 TRUE → "이미 전부 채웠다" 메시지 | ✅ | `satisfied()` → message |
| Edge: 충족 FALSE && 보낼 과목 없음 → "수강 대상 맞는 과목 없음" 메시지 | ✅ | `empty()` → message |

---

## 2. 23학번 이상 전용

| 요구사항 | 반영 여부 | 비고 |
|----------|-----------|------|
| 이때까지 수강한 교양필수의 **분야** 조사 (분야 매칭) | ✅ | `takenBaseCodes` + 분야 단위 필터, `FieldFinder.findFieldBySchoolId` |
| **놓친 분야** 확인 (학년만 고려, 2학년→1학년 6개 분야, 3학년→+2개, 4학년→+1개) | ✅ | `isLateFor(userGrade)`로 분야별 LATE 판별 → `lateFields` (텍스트) |
| 정상 분야: 이번 학기 수강 대상 맞는 분야·과목, **이미 수강한 분야 제외** | ✅ | `untakenFields` (분야 단위 이수 시 해당 분야 전체 제외) |
| Output: 놓친 분야 텍스트 + 과목(이름, 교수, 시간)-**분반&분야로 묶어서** | ✅ | 아래 "응답 형식" 참고 — 그룹핑은 프론트, 백은 기준만 전달 |
| Edge: "sw와 ai 전체학년 1개 열리" | ❓ | 문서만 있고 코드 상 특수 처리 없음 (데이터/정책 이슈 가능) |

### 응답 형식 (23학번)

- 요구사항: "과목 정보(과목 이름, 교수, 시간)-**분반&분야로 묶어서**"
- 팀 의도: **그룹핑은 프론트**, 백엔드는 **그룹핑 기준 정보**만 전달 (각 과목에 `field`, 분반은 `sections`, category 레벨 `lateFields`).
- **현재 구현**: 교양필수에서 **그룹핑하지 않음**. `courses` flat list + 각 항목에 `field` 포함 + category 레벨 `lateFields`만 전달. (`fieldGroups` 없음, `get_recommend_all.md`와 동일.)

---

## 3. 22학번 이하 전용

| 요구사항 | 반영 여부 | 비고 |
|----------|-----------|------|
| **22학번 이하는 학점만 채우면 됨, 이수현황만.** 23학번 이상만 분야 구분 | ✅ | `admissionYear <= 2022` 분기. 22이하일 때 lateFields 미제공, 과목 단위 제외만 적용. |
| 22이하 Logic 1: 수강한 교양필수 분야 조사 시 **"23학년도 이후에 생성된 과목만 해당"** | ⚠️ | DB에 과목별 개설년도 없음. 22이하는 **분야 단위 제외를 하지 않음**(과목 단위만 제외)으로 대응. |
| 22이하 Output: **"놓친 분야의 정보" 없음** (이번 학기 과목 + 이수현황만) | ✅ | 22이하 시 `lateFields = null`. |
| 22이하 Logic 2: **이미 수강한 분야 제외** + **이미 수강한 과목 제외** | ✅ | 22이하는 분야 제외 없이 **과목 단위 제외**만 (`takenBaseCodes` 기준). |

---

## 4. 구현에 필요한 정보

- **22 vs 23 구분**: `RecommendContext.admissionYear`(입학년도, `basicInfo.year`) 사용. `admissionYear <= 2022` → 22학번 이하.

---

## 5. 요약

- **반영됨**: Input/Output, 이수현황, Edge, 23학번 분야·lateFields·정상 분야 과목. 22학번 이하 구분(admissionYear, lateFields 미제공, 과목 단위 제외). 교양필수 응답 **flat `courses` + `field` + `lateFields`** (그룹핑은 프론트).
- **부분/한계**: 22이하 "23학년도 이후 생성 과목만 분야 조사" — DB에 개설년도 없어 분야 단위 제외 생략으로 대응.
- **미반영**: "sw와 ai 전체학년 1개 열리" 예외 처리(필요 시).

이 체크리스트를 기준으로 22/23 분기와 응답 형식만 정리하면, 교양필수 요구사항에 맞출 수 있습니다.
