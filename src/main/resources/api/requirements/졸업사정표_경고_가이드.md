# 졸업사정표 관련 경고 코드 가이드 (프론트 참고)

이 문서는 **졸업사정표가 없을 때** 서버가 내려주는 경고 코드 두 가지의 차이와, 어디서 어떤 값이 오는지 프론트가 이해하기 쉽게 정리한 문서입니다.

---

## 요약 표

| 코드                           | 어디서 오나요?                                               | 의미 (한 줄)                                               |
| ------------------------------ | ------------------------------------------------------------ | ---------------------------------------------------------- |
| **NO_GRADUATION_DATA**   | 로그인 후**동기화 완료** 시 (`/api/sync/status`)     | “유세인트에서 졸업사정표를 가져오지 못했어요”            |
| **NO_GRADUATION_REPORT** | **과목 추천** 호출 시 (`/api/courses/recommend/all`) | “졸업사정표가 없어서 전기/전필/교필 등 추천은 못 드려요” |

- **에러가 아니라 경고**입니다. 로그인·동기화는 성공한 상태이고, “일부 기능만 제한된다”는 뜻입니다.
- **1학년 1학기(1-1)** 처럼 졸업사정표가 아직 안 나오는 경우에 자주 발생합니다.
- **progress 해석 우선순위**: `-2`(제공 불가) → `-1`(bar 미표시) → `0,0,true`(해당 없음) → 정상.
- **progress는 모든 관련 API에서 non-null**: `recommend/all`, `available-general-electives`, `available-chapels` 모두 `progress`를 **null이 아닌 객체**로만 내려줍니다. 제공 불가 시에는 `-2`/`false` 등 센티널 값이 들어간 객체로 내려갑니다. → [progress 프론트 가이드](progress_프론트_가이드.md)

---

## 1. NO_GRADUATION_DATA (동기화 단계)

### 어디서 보이나요?

- **API**: `GET /api/sync/status`
- **응답**: `result.warnings` 배열 안에 문자열 `"NO_GRADUATION_DATA"` 가 들어 있을 수 있음.

### 의미

- **유세인트(rusaint) 쪽에서 졸업사정표 데이터를 못 가져왔다**는 뜻입니다.
- 이때 서버는:
  - 학적정보(학과, 학년, 수강 이력 등)는 그대로 저장하고
  - “졸업사정표만 없음”을 표시하기 위해 `warnings`에 `NO_GRADUATION_DATA`를 넣어서 **세션에 저장**합니다.

### 사용자에게 어떻게 보여주면 되나요?

- “졸업사정표를 불러오지 못했어요. 1학년 1학기 등 아직 발급 전일 수 있어요.”
- 전기/전필/교필 등 **졸업사정표 기반 추천**은 제공되지 않을 수 있다고 안내하면 됩니다.

---

## 2. NO_GRADUATION_REPORT (과목 추천 단계)

### 어디서 보이나요?

- **API**: `GET /api/courses/recommend/all`
- **응답**: `result.warnings` 배열 안에 문자열 `"NO_GRADUATION_REPORT"` 가 들어 있을 수 있음.

### 의미

- **지금 이 추천 결과는 “졸업사정표가 없는 상태”에서 나온 것이다**는 뜻입니다.
- 서버는:
  - **졸업사정표가 없는 경우** 전기/전필/전선/교필뿐 아니라 **재수강·교직도** “제공 불가”로 통일합니다.
  - 모든 해당 카테고리에 `progress` = `-2, -2, false`(unavailable), 메시지(예: “졸업사정표가 없어 … 추천을 제공할 수 없습니다”), 추천 과목 빈 목록을 내려줍니다.
  - 즉, **졸업사정표 데이터 자체가 없으면** 재수강/교직도 `-1`(해당 없음)이 아니라 `-2`(제공 불가)로 동일하게 처리합니다.

### NO_GRADUATION_DATA와의 관계

- 동기화 때 졸업사정표를 못 가져오면 세션에 `NO_GRADUATION_DATA`가 들어가고,
- 그 상태로 추천 API를 호출하면 서버가 **추가로** `NO_GRADUATION_REPORT`를 넣어서 내려줍니다.
- 그래서 **추천 API 응답**에서는 `["NO_GRADUATION_DATA", "NO_GRADUATION_REPORT"]` 처럼 **두 개 다** 올 수 있습니다.

### 사용자에게 어떻게 보여주면 되나요?

- “졸업사정표가 없어서 전공·교양·재수강·교직 추천을 모두 제공할 수 없어요. 졸업사정표 발급 후 이용해 주세요.”
- 모든 추천 카테고리에 “졸업사정표 발급 후 이용 가능” 안내를 노출하면 됩니다.

---

## 3. 두 코드 차이 한 줄 정리

| 구분                  | NO_GRADUATION_DATA                         | NO_GRADUATION_REPORT                                 |
| --------------------- | ------------------------------------------ | ---------------------------------------------------- |
| **의미**        | “동기화 시점에 졸업사정표를 못 가져왔다” | “지금 추천 결과는 졸업사정표 없이 만들어진 것이다” |
| **설정하는 쪽** | 동기화 파이프라인(유세인트 데이터 병합)    | 과목 추천 API                                        |
| **담기는 곳**   | 세션(유세인트 캐시) + 동기화 상태 API 응답 | 과목 추천 API 응답만                                 |
| **프론트 활용** | 로딩 완료 후 “졸업사정표 없음” 배너/안내 | 추천 화면에서 “일부 추천 불가” 안내                |

---

## 4. 왜 코드를 두 개로 나눴나요?

- **NO_GRADUATION_DATA**: “동기화가 끝났을 때 세션에 뭐가 들어갔는지”를 나타냅니다. **동기화 API** 응답에만 있고, “유세인트에서 졸업사정표를 못 가져와서 세션에는 졸업사정표가 없다”는 뜻입니다.
- **NO_GRADUATION_REPORT**: “이번 **추천 API** 응답이 졸업사정표 없이 만들어진 결과다”를 나타냅니다. 추천 API 응답에 들어가며, 클라이언트가 “이 결과는 졸업사정표 없음 상태로 만든 거구나”라고 한 번에 알 수 있게 합니다.

즉, **담기는 API와 시점이 다릅니다.**
동기화 완료 화면에서는 `NO_GRADUATION_DATA`만 보이고, 추천 화면에서는 `NO_GRADUATION_REPORT`(와 필요 시 `NO_GRADUATION_DATA`)를 보게 됩니다.

**의미가 비슷해서 헷갈릴 수 있습니다.**
원하면 “졸업사정표 없음”을 **하나의 코드**(예: `NO_GRADUATION_REPORT`)로 통일하고, 동기화 단계에서도 같은 코드를 세션에 넣어 쓰는 방식으로 정리해도 됩니다. 그때는 명세·Swagger·가이드를 한 코드 기준으로 맞추면 됩니다.

---

## 5. 기술 참고 (개발용)

- **NO_GRADUATION_DATA**: `RusaintSnapshotMerger`에서 졸업 스냅샷이 null이거나 비어 있을 때 `warnings`에 추가 → `syncSessionStore`에 저장.
- **NO_GRADUATION_REPORT**: `CourseRecommendApplicationService`에서 `ctx.graduationSummary == null`일 때 `warnings`에 추가. 전기/전필/전선/교필은 `noDataResponse(progress=unavailable)` 반환. **재수강·교직도** 졸업사정표 없으면 `noGraduationUnavailableResponse`로 `progress=-2`, 메시지·과목 빈 배열 반환.

자세한 테스트/검증 시나리오는 `테스트케이스설계.md`의 Case 5(졸업사정표 없음)를 참고하면 됩니다.
