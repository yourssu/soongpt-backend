### ========================================
### Kotlin WAS: ìœ ì„¸ì¸íŠ¸ ë™ê¸°í™” (two-track)
### WASê°€ rusaint-serviceë¥¼ academic â†’ 0.5ì´ˆ í›„ graduation í˜¸ì¶œ í›„ ë³‘í•©Â·ì €ì„±ì  ë¶„ë¥˜
### ========================================
POST http://localhost:8080/api/usaint/sync
Content-Type: application/json

{
  "studentId": "20233009",
  "sToken": "Vy3zFySFx5FASzTyGIDx5FDEMO1zCy1769181290zPy86400zAy34zEyx2BMhleBx2FAx79Bx7ALhQqBx7At8MMtMRKx78x2BQr2rR8brKj2BY5dNx2BIEfbEXA2woCcecLi7FKXzKyx78cF0PwCq3qKjwdVDpx78HeITEmuFWHVlvx78Eci99Afcl3Yx3DzSSy00001985033zUURy83e3be9b1309f182zMydl7hVkJpSgUx3Dz"
}

###

### ========================================
### Python rusaint_service ì§ì ‘ í˜¸ì¶œ (ì°¸ê³ , two-trackìš© ì—”ë“œí¬ì¸íŠ¸ë§Œ)
### ========================================

### í•™ì /ì„±ì  ì´ë ¥ ì¡°íšŒ (ì•½ 4-5ì´ˆ)
POST http://localhost:8000/api/usaint/snapshot/academic
Authorization: Bearer internal-jwt-placeholder
Content-Type: application/json

{
  "studentId": "20233009",
  "sToken": "Vy3zFySFx5FASzTyGIDx5FDEMO1zCy1769181290zPy86400zAy34zEyx2BMhleBx2FAx79Bx7ALhQqBx7At8MMtMRKx78x2BQr2rR8brKj2BY5dNx2BIEfbEXA2woCcecLi7FKXzKyx78cF0PwCq3qKjwdVDpx78HeITEmuFWHVlvx78Eci99Afcl3Yx3DzSSy00001985033UURy83e3be9b1309f182zMydl7hVkJpSgUx3Dz"
}

###

### ì¡¸ì—…ì‚¬ì •í‘œ ì¡°íšŒ (ì•½ 5-6ì´ˆ)
POST http://localhost:8000/api/usaint/snapshot/graduation
Authorization: Bearer internal-jwt-placeholder
Content-Type: application/json

{
  "studentId": "20233009",
  "sToken": "Vy3zFySFx5FASzTyGIDx5FDEMO1zCy1769675386zPy86400zAy34zEyx2FU18ORx78CEE71rf2GfqmXhDBV4IinpaNDDfgx2BHk0gigx79D1BlLMx7AIJgB2jkx79nlDVBlzKyAx78QE26sQmP591Pb2ex2BKWw80fYZlmGVo2kuLfL3x7AbEBIx3DzSSy00003976033zUURy34c2d25c2adadc44zMyiWx2F3ANNEdr0x3Dz"
}

###

### ðŸš€ Orchestrated ìš”ì²­: Academic â†’ 0.5ì´ˆ ë”œë ˆì´ â†’ Graduation
### Academic API ì‹¤í–‰ (4-5ì´ˆ)
POST http://localhost:8000/api/usaint/snapshot/academic
Authorization: Bearer internal-jwt-placeholder
Content-Type: application/json

{
  "studentId": "20233009",
  "sToken": "Vy3zFySFx5FASzTyGIDx5FDEMO1zCy1769181290zPy86400zAy34zEyx2BMhleBx2FAx79Bx7ALhQqBx7At8MMtMRKx78x2BQr2rR8brKj2BY5dNx2BIEfbEXA2woCcecLi7FKXzKyx78cF0PwCq3qKjwdVDpx78HeITEmuFWHVlvx78Eci99Afcl3Yx3DzSSy00001985033zUURy83e3be9b1309f182zMydl7hVkJpSgUx3Dz"
}

> {%
    // Academic API ì‘ë‹µ ì €ìž¥
    client.global.set("academicResponse", JSON.stringify(response.body));

    // 0.5ì´ˆ ë”œë ˆì´ í›„ Graduation API í˜¸ì¶œ
    setTimeout(function() {
        client.log("Academic API ì™„ë£Œ! 0.5ì´ˆ í›„ Graduation API í˜¸ì¶œ...");
    }, 500);
%}

###

### Graduation API ì‹¤í–‰ (5-6ì´ˆ) - ìœ„ ìš”ì²­ ì™„ë£Œ 0.5ì´ˆ í›„ ìˆ˜ë™ ì‹¤í–‰
POST http://localhost:8000/api/usaint/snapshot/graduation
Authorization: Bearer internal-jwt-placeholder
Content-Type: application/json

{
  "studentId": "20233009",
  "sToken": "Vy3zFySFx5FASzTyGIDx5FDEMO1zCy1769181290zPy86400zAy34zEyx2BMhleBx2FAx79Bx7ALhQqBx7At8MMtMRKx78x2BQr2rR8brKj2BY5dNx2BIEfbEXA2woCcecLi7FKXzKyx78cF0PwCq3qKjwdVDpx78HeITEmuFWHVlvx78Eci99Afcl3Yx3DzSSy00001985033zUURy83e3be9b1309f182zMydl7hVkJpSgUx3Dz"
}

> {%
    // Graduation API ì‘ë‹µ ì €ìž¥
    client.global.set("graduationResponse", JSON.stringify(response.body));

    // ì „ì²´ ê²°ê³¼ í•©ì¹˜ê¸°
    const academicData = JSON.parse(client.global.get("academicResponse"));
    const graduationData = response.body;

    const fullSnapshot = {
        ...academicData,
        ...graduationData
    };

    client.log("=== ì „ì²´ ìŠ¤ëƒ…ìƒ· ì™„ë£Œ ===");
    client.log("ê°œë³„ ì¡¸ì—… ìš”ê±´: " + graduationData.graduationRequirements.requirements.length + "ê°œ");
    client.log("ë¯¸ì¶©ì¡± ìš”ê±´: " + graduationData.graduationRequirements.requirements.filter(r => !r.result).length + "ê°œ");
    client.log(JSON.stringify(fullSnapshot, null, 2));
%}

###
